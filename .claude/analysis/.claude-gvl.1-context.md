# Context: Severity Tracking System

## Request summary
Track counts of severity levels (Critical/Major/Minor) and problem categories from reviewer agent output over time. Store as JSON in beads for concurrent-safe writes. Data will be consumed by a reporting/visualization tool.

## Relevant code areas
- `/Users/tomas/.claude/agents/reviewer.md` - Source of severity triage (Critical/Major/Minor definitions at lines 84-86)
- `/Users/tomas/.claude/.beads/issues.jsonl` - bd storage format, demonstrates JSONL pattern
- `/Users/tomas/.claude/artifacts/workflow-design/WORKFLOW.md` - Workflow context, reviewer role

## Existing patterns to follow
- **Severity levels** (from reviewer.md):
  - Critical: Breaks functionality, security hole, data loss risk
  - Major: Missing requirement, significant quality issue
  - Minor: Style, naming, small improvements
- **bd comments** for data storage - already used for inter-agent communication
- **JSONL format** for append-only data (see issues.jsonl)

## Technical constraints
- Must support concurrent writes from multiple agents
- Must not trigger Claude permission prompts each session
- bd/beads uses git-backed storage with merge capability
- Comments are append-only (safe for concurrent use)

## Edge cases to address
- Multiple reviewers running simultaneously - each writes own comment, no conflict
- New category needed - reviewer can add dynamically
- Empty review (no issues found) - still record as datapoint with zero counts
- Malformed JSON in comment - consuming tool must handle gracefully

## Risks
- bd comments API may have size limits (need to keep payloads compact)
- Dedicated tracking task could accumulate many comments over time
